<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>
   
   <extension point="org.eclipse.ui.importWizards">
      <category name="%Git_clone_category"
	    id="com.aptana.git.ui.clone.category"/>
      <wizard name="%Git_clone_wizard"
	    icon="icons/obj16/import_obj.gif"
	    class="com.aptana.git.ui.internal.wizards.CloneWizard"
	    id="com.aptana.git.ui.wizards.CloneWizard"
	    category="com.aptana.git.ui.clone.category">
	    <description>%Git_clone_description</description>
      </wizard>
   </extension>
   
   <extension point="org.eclipse.team.ui.configurationWizards">
      <wizard name="%SharingWizard_name"
	    icon="icons/etool16/newconnect_wiz.gif"
            class="com.aptana.git.ui.internal.sharing.SharingWizard"
            id="com.aptana.git.ui.internal.sharing.SharingWizard">
      </wizard>
   </extension>
   
   <extension point="org.eclipse.ui.decorators">
      <decorator
            lightweight="true"
            adaptable="true"
            label="%Decorator.name"
            class="com.aptana.git.ui.internal.GitLightweightDecorator"
            state="true"
            location="BOTTOM_RIGHT"
            id="com.aptana.git.ui.internal.GitLightweightDecorator">
            <enablement>
              <objectClass name="org.eclipse.core.resources.IResource"/>
            </enablement>
         <description>
            %Decorator.description
         </description>
      </decorator>
   </extension>
   <extension
         point="org.eclipse.team.ui.teamDecorators">
      <teamDecorator
            decoratedDirection="OUTGOING"
            decoratorId="com.aptana.git.ui.internal.GitLightweightDecorator"
            repositoryId="com.aptana.git.core.GitRepositoryProvider">
      </teamDecorator>
   </extension>
   
   <extension
         point="org.eclipse.core.runtime.adapters">
         <factory
               adaptableType="com.aptana.git.internal.core.storage.GitFileHistoryProvider"
               class="com.aptana.git.ui.internal.GitAdapterFactory">
            <adapter
                  type="org.eclipse.team.ui.history.IHistoryPageSource">
            </adapter>
         </factory>
         <factory
	       adaptableType="org.eclipse.core.resources.IResource"
               class="com.aptana.git.ui.internal.GitAdapterFactory">
            <adapter
                  type="org.eclipse.team.ui.history.IHistoryPageSource">
            </adapter>
         </factory>
   </extension>
   <extension
         point="org.eclipse.ui.commands">
      <category
            id="com.aptana.git.ui.category"
            name="%Git_command_category">
      </category>
      <command
            categoryId="com.aptana.git.ui.category"
            defaultHandler="com.aptana.git.ui.internal.actions.AddRemoteHandler"
            id="com.aptana.git.ui.command.add_remote"
            name="%AddRemoteAction_tooltip">
      </command>
      <command
            categoryId="com.aptana.git.ui.category"
            defaultHandler="com.aptana.git.ui.internal.actions.PushHandler"
            id="com.aptana.git.ui.command.push"
            name="%PushAction_tooltip">
      </command>
       <command
            categoryId="com.aptana.git.ui.category"
            defaultHandler="com.aptana.git.ui.internal.actions.PushToRemoteHandler"
            id="com.aptana.git.ui.command.push_to_remote"
            name="%PushToRemoteAction_tooltip">
      </command>
      <command
            categoryId="com.aptana.git.ui.category"
            defaultHandler="com.aptana.git.ui.internal.actions.GithubNetworkHandler"
            id="com.aptana.git.ui.command.github.network"
            name="%GithubNetworkAction_label">
      </command>
      <command
            categoryId="com.aptana.git.ui.category"
            defaultHandler="com.aptana.git.ui.internal.actions.PullHandler"
            id="com.aptana.git.ui.command.pull"
            name="%PullAction_tooltip">
      </command>
      <command
            categoryId="com.aptana.git.ui.category"
            defaultHandler="com.aptana.git.ui.internal.actions.CommitHandler"
            id="com.aptana.git.ui.command.commit"
            name="%CommitAction_tooltip">
      </command>
      <command
            categoryId="com.aptana.git.ui.category"
            defaultHandler="com.aptana.git.ui.internal.actions.StatusHandler"
            id="com.aptana.git.ui.command.status"
            name="%StatusAction_tooltip">
      </command>
      <command
            categoryId="com.aptana.git.ui.category"
            defaultHandler="com.aptana.git.ui.internal.actions.RevertHandler"
            id="com.aptana.git.ui.command.revert"
            name="%RevertAction_tooltip">
      </command>
      <command
            categoryId="com.aptana.git.ui.category"
            defaultHandler="com.aptana.git.ui.internal.actions.StageHandler"
            id="com.aptana.git.ui.command.stage"
            name="%StageAction_tooltip">
      </command>
      <command
            categoryId="com.aptana.git.ui.category"
            defaultHandler="com.aptana.git.ui.internal.actions.UnstageHandler"
            id="com.aptana.git.ui.command.unstage"
            name="%UnstageAction_tooltip">
      </command>
      <command
            categoryId="com.aptana.git.ui.category"
            defaultHandler="com.aptana.git.ui.internal.actions.CreateBranchHandler"
            id="com.aptana.git.ui.command.create_branch"
            name="%CreateBranchAction_tooltip">
      </command>
      <command
            categoryId="com.aptana.git.ui.category"
            defaultHandler="com.aptana.git.ui.internal.actions.SwitchBranchHandler"
            id="com.aptana.git.ui.command.switch_branch"
            name="%SwitchBranchAction_tooltip">
      </command>
      <command
            categoryId="com.aptana.git.ui.category"
            defaultHandler="com.aptana.git.ui.internal.actions.MergeBranchHandler"
            id="com.aptana.git.ui.command.merge_branch"
            name="%MergeBranchAction_tooltip">
      </command>
      <command
            categoryId="com.aptana.git.ui.category"
            defaultHandler="com.aptana.git.ui.internal.actions.SquashMergeBranchHandler"
            id="com.aptana.git.ui.command.squash_merge_branch"
            name="%SquashMergeBranchAction_tooltip">
      </command>
      <command
            categoryId="com.aptana.git.ui.category"
            defaultHandler="com.aptana.git.ui.internal.actions.DeleteBranchHandler"
            id="com.aptana.git.ui.command.delete_branch"
            name="%DeleteBranchAction_tooltip">
      </command>
      <command
            categoryId="com.aptana.git.ui.category"
            defaultHandler="com.aptana.git.ui.internal.actions.MergeConflictsHandler"
            id="com.aptana.git.ui.command.merge_conflicts"
            name="%MergeConflictsAction_tooltip">
      </command>
      <command
            categoryId="com.aptana.git.ui.category"
            defaultHandler="com.aptana.git.ui.internal.actions.CompareWithHEADHandler"
            id="com.aptana.git.ui.command.compare_with_HEAD"
            name="%CompareWithHEADAction_tooltip">
      </command>
      <command
            categoryId="com.aptana.git.ui.category"
            defaultHandler="com.aptana.git.ui.internal.actions.CompareWithRevisionHandler"
            id="com.aptana.git.ui.command.compare_with_revision"
            name="%CompareWithRevisionAction_tooltip">
      </command>
      <command
            categoryId="com.aptana.git.ui.category"
            defaultHandler="com.aptana.git.ui.internal.actions.BlameHandler"
            id="com.aptana.git.ui.command.blame"
            name="%BlameAction_label">
      </command>
      <command
            categoryId="com.aptana.git.ui.category"
            defaultHandler="com.aptana.git.ui.internal.actions.ShowInHistoryHandler"
            id="com.aptana.git.ui.command.showInResourceHistory"
            name="%command.showin.resource.name">
      </command>
      <command
            categoryId="com.aptana.git.ui.category"
            defaultHandler="com.aptana.git.ui.actions.DisconnectHandler"
            id="com.aptana.git.ui.command.disconnect"
            name="%DisconnectAction_label">
      </command>
      <command
            categoryId="com.aptana.git.ui.category"
            defaultHandler="com.aptana.git.ui.internal.actions.DiffHandler"
            id="com.aptana.git.ui.command.diff"
            name="%command.diff.name">
      </command>
      <command
            categoryId="com.aptana.git.ui.category"
            defaultHandler="com.aptana.git.ui.internal.actions.AttachGitRepoHandler"
            id="com.aptana.git.ui.command.attach"
            name="%command.attach.name">
      </command>
      <command
            categoryId="com.aptana.git.ui.category"
            defaultHandler="com.aptana.git.ui.internal.actions.StashHandler"
            id="com.aptana.git.ui.command.stash"
            name="%command.stash.name">
      </command>
      <command
            categoryId="com.aptana.git.ui.category"
            defaultHandler="com.aptana.git.ui.internal.actions.UnstashHandler"
            id="com.aptana.git.ui.command.unstash"
            name="%command.unstash.name">
      </command>
      <command
            categoryId="com.aptana.git.ui.category"
            defaultHandler="com.aptana.git.ui.internal.actions.IgnoreHandler"
            id="com.aptana.git.ui.command.ignore"
            name="%IgnoreAction_label">
      </command>
      <command
            id="com.aptana.git.ui.command.commit.dialog"
            name="%command.commit.name">
      </command>
      <command
            categoryId="com.aptana.git.ui.category"
            defaultHandler="com.aptana.git.ui.internal.actions.RebaseBranchHandler"
            id="com.aptana.git.ui.command.rebase_branch"
            name="%RebaseBranchAction_tooltip">
      </command>
      <command
            categoryId="com.aptana.git.ui.category"
            defaultHandler="com.aptana.git.ui.internal.actions.CreateTagHandler"
            id="com.aptana.git.ui.command.create_tag"
            name="%CreateTagAction_tooltip">
      </command>
      <command
            categoryId="com.aptana.git.ui.category"
            defaultHandler="com.aptana.git.ui.internal.actions.PushTagsHandler"
            id="com.aptana.git.ui.command.push_tags"
            name="%PushTagsAction_tooltip">
      </command>
      <command
            categoryId="com.aptana.git.ui.category"
            defaultHandler="com.aptana.git.ui.internal.actions.DeleteRemoteHandler"
            id="com.aptana.git.ui.command.delete_remote"
            name="%DeleteRemoteAction_tooltip">
      </command>
      <command
            categoryId="com.aptana.git.ui.category"
            defaultHandler="com.aptana.git.ui.internal.actions.PullFromRemoteHandler"
            id="com.aptana.git.ui.command.pull_from_remote"
            name="%PullRemoteAction_tooltip">
      </command>
      <command
            categoryId="com.aptana.git.ui.category"
            defaultHandler="com.aptana.git.ui.internal.actions.CreatePullRequestHandler"
            id="com.aptana.git.ui.command.create_pull_request"
            name="Create Pull Request...">
      </command>
      <command
            categoryId="com.aptana.git.ui.category"
            defaultHandler="com.aptana.git.ui.internal.actions.ViewPullRequestHandler"
            id="com.aptana.git.ui.command.view_pull_request"
            name="View Pull Request...">
      </command>
      <!--
      <command
            categoryId="com.aptana.git.ui.category"
            defaultHandler="com.aptana.git.ui.internal.actions.MergePullRequestHandler"
            id="com.aptana.git.ui.command.merge_pull_request"
            name="Merge Pull Request...">
      </command>
      <command
            categoryId="com.aptana.git.ui.category"
            defaultHandler="com.aptana.git.ui.internal.actions.DeletePullRequestHandler"
            id="com.aptana.git.ui.command.delete_pull_request"
            name="Delete Pull Request...">
      </command>
      -->
   </extension>
   <extension
         point="org.eclipse.ui.bindings">
      <key
            commandId="com.aptana.git.ui.command.push"
            contextId="org.eclipse.ui.contexts.window"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+M3+G ARROW_RIGHT">
      </key>
      <key
            commandId="com.aptana.git.ui.command.push_to_remote"
            contextId="org.eclipse.ui.contexts.window"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+M3+G P">
      </key>
      <key
            commandId="com.aptana.git.ui.command.add_remote"
            contextId="org.eclipse.ui.contexts.window"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+M3+G E">
      </key>
      <key
            commandId="com.aptana.git.ui.command.delete_remote"
            contextId="org.eclipse.ui.contexts.window"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+M3+G 3">
      </key>
      <key
            commandId="com.aptana.git.ui.command.github.network"
            contextId="org.eclipse.ui.contexts.window"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+M3+G G">
      </key>
      <key
            commandId="com.aptana.git.ui.command.pull"
            contextId="org.eclipse.ui.contexts.window"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+M3+G ARROW_LEFT">
      </key>
      <key
            commandId="com.aptana.git.ui.command.status"
            contextId="org.eclipse.ui.contexts.window"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+M3+G S">
      </key>
      <key
            commandId="com.aptana.git.ui.command.commit"
            contextId="org.eclipse.ui.contexts.window"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+M3+G C">
      </key>
      <key
            commandId="com.aptana.git.ui.command.revert"
            contextId="org.eclipse.ui.contexts.window"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+M3+G R">
      </key>
      <key
            commandId="com.aptana.git.ui.command.unstage"
            contextId="org.eclipse.ui.contexts.window"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+M3+G NUMPAD_SUBTRACT">
      </key>
      <key
            commandId="com.aptana.git.ui.command.stage"
            contextId="org.eclipse.ui.contexts.window"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+M3+G NUMPAD_ADD">
      </key>
      <key
            commandId="com.aptana.git.ui.command.create_branch"
            contextId="org.eclipse.ui.contexts.window"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+M3+G A">
      </key>
      <key
            commandId="com.aptana.git.ui.command.switch_branch"
            contextId="org.eclipse.ui.contexts.window"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+M3+G W">
      </key>
      <key
            commandId="com.aptana.git.ui.command.merge_branch"
            contextId="org.eclipse.ui.contexts.window"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+M3+G M">
      </key>
      <key
            commandId="com.aptana.git.ui.command.rebase_branch"
            contextId="org.eclipse.ui.contexts.window"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+M3+G NUMPAD_DIVIDE">
      </key>
      <key
            commandId="com.aptana.git.ui.command.squash_merge_branch"
            contextId="org.eclipse.ui.contexts.window"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+M3+G Q">
      </key>
      <key
            commandId="com.aptana.git.ui.command.delete_branch"
            contextId="org.eclipse.ui.contexts.window"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+M3+G D">
      </key>
      <key
            commandId="com.aptana.git.ui.command.merge_conflicts"
            contextId="org.eclipse.ui.contexts.window"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+M3+G X">
      </key>
      <key
            commandId="com.aptana.git.ui.command.compare_with_HEAD"
            contextId="org.eclipse.ui.contexts.window"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+M3+G .">
      </key>
      <key
            commandId="com.aptana.git.ui.command.compare_with_revision"
            contextId="org.eclipse.ui.contexts.window"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+M3+G V">
      </key>
      <key
            commandId="com.aptana.git.ui.command.blame"
            contextId="org.eclipse.ui.contexts.window"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+M3+G B">
      </key>
      <key
            commandId="com.aptana.git.ui.command.disconnect"
            contextId="org.eclipse.ui.contexts.window"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+M3+G DELETE">
      </key>
      <key
            commandId="com.aptana.git.ui.command.diff"
            contextId="org.eclipse.ui.contexts.window"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+M3+G F">
      </key>
      <key
            commandId="com.aptana.git.ui.command.attach"
            contextId="org.eclipse.ui.contexts.window"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+M3+G T">
      </key>
      <key
            commandId="com.aptana.git.ui.command.showInResourceHistory"
            contextId="org.eclipse.ui.contexts.window"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+M3+G H">
      </key>
      <key
            commandId="com.aptana.git.ui.command.stash"
            contextId="org.eclipse.ui.contexts.window"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+M3+G J">
      </key>
      <key
            commandId="com.aptana.git.ui.command.unstash"
            contextId="org.eclipse.ui.contexts.window"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+M3+G U">
      </key>
      <key
            commandId="com.aptana.git.ui.command.ignore"
            contextId="org.eclipse.ui.contexts.window"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+M3+G I">
      </key>
      <key
            commandId="com.aptana.git.ui.command.create_tag"
            contextId="org.eclipse.ui.contexts.window"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+M3+G NUMPAD_9">
      </key>
      <key
            commandId="com.aptana.git.ui.command.push_tags"
            contextId="org.eclipse.ui.contexts.window"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+M3+G NUMPAD_6">
      </key>
      <key
            commandId="com.aptana.git.ui.command.commit.dialog"
            contextId="com.aptana.git.ui.context.dialog.commit"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+Enter">
      </key>
      <sequenceModifier
            find="M2+M3"
            platforms="carbon,cocoa"
            replace="M1+M4">
      </sequenceModifier>
      <key
            commandId="com.aptana.git.ui.command.create_pull_request"
            contextId="org.eclipse.ui.contexts.window"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+M3+G NUMPAD_7">
      </key>
      <key
            commandId="com.aptana.git.ui.command.pull_from_remote"
            contextId="org.eclipse.ui.contexts.window"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+M3+G NUMPAD_1">
      </key>
      <key
            commandId="com.aptana.git.ui.command.view_pull_request"
            contextId="org.eclipse.ui.contexts.window"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+M3+G NUMPAD_3">
      </key>
   </extension>
   <extension
         point="org.eclipse.ui.preferencePages">
      <page
            category="org.eclipse.team.ui.TeamPreferences"
            class="com.aptana.git.ui.internal.preferences.GitPreferencePage"
            id="com.aptana.git.ui.GitExecutableLocationPage"
            name="%page.git.name">
      </page>
   </extension>
   <extension
         point="org.eclipse.ui.workbench.texteditor.quickDiffReferenceProvider">
      <referenceprovider
            class="com.aptana.git.ui.internal.QuickDiffReferenceProvider"
            id="com.aptana.git.ui.quickdiff"
            label="%referenceprovider.quickdiff.label">
      </referenceprovider>
   </extension>
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            allPopups="false"
            locationURI="popup:org.eclipse.ui.menus.showInMenu">
         <command
               commandId="com.aptana.git.ui.command.showInResourceHistory"
               label="%ResourceHistory_label"
               style="push"
               tooltip="%ShowResourceInHistoryAction_label">
         </command>
      </menuContribution>
      <!-- Have to add the Team menu since eclipse hasn't transitioned to this ext pt and old menus get added _after_ we process this new ext pt, so our contributions would fail -->
      <menuContribution
            allPopups="false"
            locationURI="popup:org.eclipse.ui.popup.any?endof=additions">
         <menu
               id="team.main"
               label="%TeamMenu.label">
            <separator
                  name="group1">
            </separator>
            <separator
                  name="group2"
                  visible="true">
            </separator>
            <separator
                  name="group3">
            </separator>
            <separator
                  name="group4">
            </separator>
            <separator
                  name="group5">
            </separator>
            <separator
                  name="group6">
            </separator>
            <separator
                  name="group7">
            </separator>
            <separator
                  name="group8">
            </separator>
            <separator
                  name="group9">
            </separator>
            <separator
                  name="group10">
            </separator>
            <separator
                  name="targetGroup"
                  visible="true">
            </separator>
            <separator
                  name="applyPatchGroup">
            </separator>
            <separator
                  name="projectGroup"
                  visible="true">
            </separator>
         </menu>
         <menu
               id="compareWithMenu"
               label="%CompareWithMenu.label">
            <separator
                  name="compareWithGroup">
            </separator>
         </menu>
         <menu
               id="replaceWithMenu"
               label="%ReplaceWithMenu.label">
            <separator
                  name="replaceWithGroup">
            </separator>
            <visibleWhen
                  checkEnabled="false">
               <or>
                  <with
                        variable="activeMenuSelection">
                     <iterate
                           ifEmpty="false">
                        <adapt
                              type="org.eclipse.core.resources.IFile">
                        </adapt>
                     </iterate>
                  </with>
                  <with
                        variable="activeMenuEditorInput">
                     <iterate
                           ifEmpty="false">
                        <adapt
                              type="org.eclipse.core.resources.IFile">
                        </adapt>
                     </iterate>
                  </with>
                  <with
                        variable="selection">
                     <iterate
                           ifEmpty="false">
                        <or>
                           <adapt
                                 type="org.eclipse.core.resources.IContainer">
                           </adapt>
                           <adapt
                                 type="org.eclipse.core.resources.IFile">
                           </adapt>
                        </or>
                     </iterate>
                  </with>
               </or>
            </visibleWhen>
         </menu>
      </menuContribution>
       <menuContribution
             allPopups="true"
             locationURI="popup:team.main?endof=group1">
          <command
                commandId="com.aptana.git.ui.command.push"
                id="com.aptana.git.ui.actions.PushAction"
                label="%PushAction_label"
                style="push"
                tooltip="%PushAction_tooltip">
             <visibleWhen
                   checkEnabled="false">
                <reference
                      definitionId="com.aptana.git.ui.hasGitRepository">
                </reference>
             </visibleWhen>
          </command>
          <command
                commandId="com.aptana.git.ui.command.pull"
                id="com.aptana.git.ui.actions.PullAction"
                label="%PullAction_label"
                tooltip="%PullAction_tooltip">
             <visibleWhen
                   checkEnabled="false">
                <reference
                      definitionId="com.aptana.git.ui.hasGitRepository">
                </reference>
             </visibleWhen>
          </command>
          <command
                commandId="com.aptana.git.ui.command.commit"
                id="com.aptana.git.ui.actions.CommitAction"
                label="%CommitAction_label"
                tooltip="%CommitAction_tooltip">
             <visibleWhen
                   checkEnabled="false">
                <reference
                      definitionId="com.aptana.git.ui.hasGitRepository">
                </reference>
             </visibleWhen>
          </command>
          <separator
                name="com.aptana.git.ui.separator1"
                visible="true">
          </separator>
       </menuContribution>
      <menuContribution
            allPopups="true"
            locationURI="popup:team.main?endof=applyPatchGroup">
         <command
               commandId="com.aptana.git.ui.command.diff"
               id="com.aptana.git.ui.actions.DiffAction"
               label="%DiffAction_label"
               style="push"
               tooltip="%DiffAction_tooltip">
            <visibleWhen
                  checkEnabled="false">
               <reference
                     definitionId="com.aptana.git.ui.hasGitRepository">
               </reference>
            </visibleWhen>
         </command>
       </menuContribution>
      <menuContribution
            allPopups="true"
            locationURI="popup:team.main?endof=group2">
         <menu
               icon="icons/elcl16/arrow_branch.png"
               label="%branches.menu.label">
            <command
                  commandId="com.aptana.git.ui.command.create_branch"
                  id="com.aptana.git.ui.actions.CreateBranchAction"
                  label="%create.branch.menu.label">
               <visibleWhen
                     checkEnabled="false">
                  <reference
                        definitionId="com.aptana.git.ui.hasGitRepository">
                  </reference>
               </visibleWhen>
            </command>
            <menu
                  commandId="com.aptana.git.ui.command.delete_branch"
                  id="com.aptana.git.ui.actions.DeleteBranchAction"
                  label="%delete.branch.menu.label"
                  mnemonic="%menu.d.mnemonic">
               <dynamic
                     class="com.aptana.git.ui.actions.DeleteBranchItem"
                     id="com.aptana.git.ui.command.delete_branch.items">
               </dynamic>
               <visibleWhen
                     checkEnabled="false">
                  <reference
                        definitionId="com.aptana.git.ui.hasGitRepository">
                  </reference>
               </visibleWhen>
            </menu>
            <menu
                  commandId="com.aptana.git.ui.command.switch_branch"
                  id="com.aptana.git.ui.actions.SwitchBranchAction"
                  label="%switch.branch.menu.label"
                  mnemonic="%menu.s.mnemonic">
               <dynamic
                     class="com.aptana.git.ui.actions.SwitchBranchItem"
                     id="com.aptana.git.ui.command.switch_branch.items">
               </dynamic>
               <visibleWhen
                     checkEnabled="false">
                  <reference
                        definitionId="com.aptana.git.ui.hasGitRepository">
                  </reference>
               </visibleWhen>
            </menu>
            <menu
                  commandId="com.aptana.git.ui.command.merge_branch"
                  id="com.aptana.git.ui.actions.MergeBranchAction"
                  label="%merge.menu.label"
                  mnemonic="%menu.m.mnemonic">
               <dynamic
                     class="com.aptana.git.ui.actions.MergeBranchItem"
                     id="com.aptana.git.ui.command.merge_branch.items">
               </dynamic>
               <visibleWhen
                     checkEnabled="false">
                  <reference
                        definitionId="com.aptana.git.ui.hasGitRepository">
                  </reference>
               </visibleWhen>
            </menu>
            <menu
                  commandId="com.aptana.git.ui.command.squash_merge_branch"
                  id="com.aptana.git.ui.actions.SquashMergeBranchAction"
                  label="%squash.merge.menu.label"
                  mnemonic="%menu.q.mnemonic">
               <dynamic
                     class="com.aptana.git.ui.actions.SquashMergeBranchItem"
                     id="com.aptana.git.ui.command.squash_merge_branch.items">
               </dynamic>
               <visibleWhen
                     checkEnabled="false">
                  <reference
                        definitionId="com.aptana.git.ui.hasGitRepository">
                  </reference>
               </visibleWhen>
            </menu>
            <menu
                  commandId="com.aptana.git.ui.command.rebase_branch"
                  id="com.aptana.git.ui.actions.RebaseBranchAction"
                  label="%RebaseBranchAction_label"
                  mnemonic="%menu.r.mnemonic"
                  tooltip="%RebaseBranchAction_tooltip">
               <dynamic
                     class="com.aptana.git.ui.actions.RebaseBranchItem"
                     id="com.aptana.git.ui.command.rebase_branch.items">
               </dynamic>
               <visibleWhen
                     checkEnabled="false">
                  <reference
                        definitionId="com.aptana.git.ui.hasGitRepository">
                  </reference>
               </visibleWhen>
            </menu>
         </menu>
         <menu
               icon="icons/elcl16/tag_blue.png"
               label="%tag.menu.label">
            <command
                  commandId="com.aptana.git.ui.command.create_tag"
                  id="com.aptana.git.ui.actions.CreateTagAction"
                  label="%create.tag.menu.label">
               <visibleWhen
                     checkEnabled="false">
                  <reference
                        definitionId="com.aptana.git.ui.hasGitRepository">
                  </reference>
               </visibleWhen>
            </command>
            <menu
                  commandId="com.aptana.git.ui.command.push_tags"
                  id="com.aptana.git.ui.actions.PushTagsAction"
                  label="%push.tags.menu.label">
               <dynamic
                     class="com.aptana.git.ui.actions.PushTagsItem"
                     id="com.aptana.git.ui.command.push_tags.items">
               </dynamic>
               <visibleWhen
                     checkEnabled="false">
                  <reference
                        definitionId="com.aptana.git.ui.hasGitRepository">
                  </reference>
               </visibleWhen>
            </menu>
         </menu>
         <menu
               icon="icons/elcl16/server.png"
               label="%remotes.menu.label">
            <command
                  commandId="com.aptana.git.ui.command.add_remote"
                  id="com.aptana.git.ui.actions.AddRemoteAction"
                  label="%add.remote.menu.label">
               <visibleWhen
                     checkEnabled="false">
                  <reference
                        definitionId="com.aptana.git.ui.hasGitRepository">
                  </reference>
               </visibleWhen>
            </command>
            <menu
                  commandId="com.aptana.git.ui.command.push_to_remote"
                  id="com.aptana.git.ui.actions.PushToRemoteAction"
                  label="%push_to_remote.menu.label">
               <dynamic
                     class="com.aptana.git.ui.actions.PushToRemoteItem"
                     id="com.aptana.git.ui.command.push_to_remote.items">
               </dynamic>
               <visibleWhen
                     checkEnabled="false">
                  <reference
                        definitionId="com.aptana.git.ui.hasGitRepository">
                  </reference>
               </visibleWhen>
            </menu>
            <menu
                  commandId="com.aptana.git.ui.command.pull_from_remote"
                  id="com.aptana.git.ui.actions.PullFromRemoteAction"
                  label="%pull_from_remote.menu.label">
               <dynamic
                     class="com.aptana.git.ui.actions.PullFromRemoteItem"
                     id="com.aptana.git.ui.command.pull_from_remote.items">
               </dynamic>
               <visibleWhen
                     checkEnabled="false">
                  <reference
                        definitionId="com.aptana.git.ui.hasGitRepository">
                  </reference>
               </visibleWhen>
            </menu>
            <menu
                  commandId="com.aptana.git.ui.command.delete_remote"
                  id="com.aptana.git.ui.actions.DeleteRemoteAction"
                  label="%delete.remote.menu.label">
               <dynamic
                     class="com.aptana.git.ui.actions.DeleteRemoteItem"
                     id="com.aptana.git.ui.command.delete_remote.items">
               </dynamic>
               <visibleWhen
                     checkEnabled="false">
                  <reference
                        definitionId="com.aptana.git.ui.hasGitRepository">
                  </reference>
               </visibleWhen>
            </menu>
         </menu>
      </menuContribution>
      <menuContribution
            allPopups="true"
            locationURI="popup:team.main?endof=targetGroup">
         <command
               commandId="com.aptana.git.ui.command.stage"
               id="com.aptana.git.ui.actions.StageAction"
               label="%StageAction_label"
               tooltip="%StageAction_tooltip">
            <visibleWhen
                  checkEnabled="false">
               <reference
                        definitionId="com.aptana.git.ui.hasGitRepository">
                  </reference>
            </visibleWhen>
         </command>
         <command
               commandId="com.aptana.git.ui.command.unstage"
               id="com.aptana.git.ui.actions.UnstageAction"
               label="%UnstageAction_label"
               tooltip="%UnstageAction_tooltip">
            <visibleWhen
                  checkEnabled="false">
               <reference
                     definitionId="com.aptana.git.ui.hasGitRepository">
               </reference>
            </visibleWhen>
         </command>
         <command
               commandId="com.aptana.git.ui.command.revert"
               id="com.aptana.git.ui.actions.RevertAction"
               label="%RevertAction_label"
               tooltip="%RevertAction_tooltip">
            <visibleWhen
                  checkEnabled="false">
               <reference
                     definitionId="com.aptana.git.ui.hasGitRepository">
               </reference>
            </visibleWhen>
         </command>
         <command
               commandId="com.aptana.git.ui.command.ignore"
               id="com.aptana.git.ui.actions.MergeConflictsAction"
               label="%IgnoreAction_label">
            <visibleWhen
                  checkEnabled="false">
               <reference
                     definitionId="com.aptana.git.ui.hasGitRepository">
               </reference>
            </visibleWhen>
         </command>
         <command
               commandId="com.aptana.git.ui.command.showInResourceHistory"
               id="com.aptana.git.ui.actions.ShowResourceInHistoryAction"
               label="%ShowResourceInHistoryAction_label"
               tooltip="%ShowResourceInHistoryAction_tooltip">
            <visibleWhen
                  checkEnabled="false">
               <reference
                     definitionId="com.aptana.git.ui.hasGitRepository">
               </reference>
            </visibleWhen>
         </command>
         <separator
               name="com.aptana.git.ui.separator4"
               visible="true">
         </separator>
         <command
               commandId="com.aptana.git.ui.command.blame"
               id="com.aptana.git.ui.actions.BlameAction"
               label="%BlameAction_label"
               tooltip="%BlameAction_tooltip">
            <visibleWhen
                  checkEnabled="false">
               <reference
                     definitionId="com.aptana.git.ui.hasGitRepository">
               </reference>
            </visibleWhen>
         </command>
         <command
               commandId="com.aptana.git.ui.command.merge_conflicts"
               id="com.aptana.git.ui.actions.MergeConflictsAction"
               label="%MergeConflictsAction_label"
               tooltip="%MergeConflictsAction_tooltip">
            <visibleWhen
                  checkEnabled="false">
               <reference
                     definitionId="com.aptana.git.ui.hasGitRepository">
               </reference>
            </visibleWhen>
         </command>
         <separator
               name="com.aptana.git.ui.separator5"
               visible="true">
         </separator>
      </menuContribution>
       <menuContribution
            allPopups="true"
            locationURI="popup:team.main?endof=projectGroup">
          <command
                commandId="com.aptana.git.ui.command.status"
                id="com.aptana.git.ui.actions.StatusAction"
                label="%StatusAction_label"
                tooltip="%StatusAction_tooltip">
             <visibleWhen
                   checkEnabled="false">
                <reference
                      definitionId="com.aptana.git.ui.hasGitRepository">
                </reference>
             </visibleWhen>
          </command>
          <separator
                name="com.aptana.git.ui.separator.github"
                visible="true">
          </separator>
          <menu
                icon="icons/obj16/pull_request.gif"
                label="%pull_requests.menu.label">
             <command
                   commandId="com.aptana.git.ui.command.create_pull_request"
                   id="com.aptana.git.ui.actions.GithubPullRequestAction"
                   label="%create.branch.menu.label">
                <visibleWhen
                      checkEnabled="true">
                   <reference
                         definitionId="com.aptana.git.ui.hasGitRepository">
                   </reference>
                </visibleWhen>
             </command>
             <!--
             <menu
                   commandId="com.aptana.git.ui.command.delete_pull_request"
                   id="com.aptana.git.ui.actions.DeletePullRequestAction"
                   label="%delete.branch.menu.label"
                   mnemonic="%menu.d.mnemonic">
                <dynamic
                      class="com.aptana.git.ui.actions.DeletePullRequestItem"
                      id="com.aptana.git.ui.command.delete_pull_request.items">
                </dynamic>
                <visibleWhen
                      checkEnabled="false">
                   <reference
                         definitionId="com.aptana.git.ui.hasGitRepository">
                   </reference>
                </visibleWhen>
             </menu>
             -->
             <menu
                   commandId="com.aptana.git.ui.command.view_pull_request"
                   id="com.aptana.git.ui.actions.ViewPullRequestAction"
                   label="View">
                <dynamic
                      class="com.aptana.git.ui.actions.ViewPullRequestItem"
                      id="com.aptana.git.ui.command.view_pull_request.items">
                </dynamic>
                <visibleWhen
                      checkEnabled="false">
                   <reference
                         definitionId="com.aptana.git.ui.hasGitRepository">
                   </reference>
                </visibleWhen>
             </menu>
             <!--
             <menu
                   commandId="com.aptana.git.ui.command.merge_branch"
                   id="com.aptana.git.ui.actions.MergeBranchAction"
                   label="%merge.menu.label"
                   mnemonic="%menu.m.mnemonic">
                <dynamic
                      class="com.aptana.git.ui.actions.MergePullRequestItem"
                      id="com.aptana.git.ui.command.merge_pull_request.items">
                </dynamic>
                <visibleWhen
                      checkEnabled="false">
                   <reference
                         definitionId="com.aptana.git.ui.hasGitRepository">
                   </reference>
                </visibleWhen>
             </menu>
             -->
          </menu>
         <command
               commandId="com.aptana.git.ui.command.github.network"
               id="com.aptana.git.ui.actions.GithubNetworkAction"
               label="%GithubNetworkAction_label"
               tooltip="%GithubNetworkAction_tooltip">
            <visibleWhen
                  checkEnabled="false">
               <reference
                     definitionId="com.aptana.git.ui.hasGitRepository">
               </reference>
            </visibleWhen>
         </command>
         <separator
               name="com.aptana.git.ui.separator2"
               visible="true">
         </separator>
         <command
               label="%DisconnectAction_label"
               commandId="com.aptana.git.ui.command.disconnect"
               tooltip="%DisconnectAction_tooltip"
               id="com.aptana.git.ui.actions.DisconnectAction">
            <visibleWhen
                  checkEnabled="false">
               <reference
                     definitionId="com.aptana.git.ui.hasGitRepository">
               </reference>
            </visibleWhen>
         </command>
       </menuContribution>
       <menuContribution
             allPopups="true"
             locationURI="popup:compareWithMenu?endof=compareWithGroup">
          <command
                commandId="com.aptana.git.ui.command.compare_with_HEAD"
                id="com.aptana.git.ui.actions.CompareWithHEADAction"
                label="%CompareWithHEADAction_label"
                style="push"
                tooltip="%CompareWithHEADAction_tooltip">
             <visibleWhen
                   checkEnabled="false">
                <reference
                      definitionId="com.aptana.git.ui.hasGitRepository">
                </reference>
             </visibleWhen>
          </command>
           <command
               commandId="com.aptana.git.ui.command.compare_with_revision"
               id="com.aptana.git.ui.actions.CompareWithRevisionAction"
               label="%CompareWithRevisionAction_label"
               tooltip="%CompareWithRevisionAction_tooltip">
              <visibleWhen
                    checkEnabled="false">
                 <reference
                       definitionId="com.aptana.git.ui.hasGitRepository">
                 </reference>
              </visibleWhen>
         </command>
       </menuContribution>
   </extension>
   <extension
         point="org.eclipse.ui.commandImages">
      <image
            commandId="com.aptana.git.ui.command.stage"
            icon="icons/elcl16/add.gif">
      </image>
      <image
            commandId="com.aptana.git.ui.command.unstage"
            icon="icons/elcl16/subtract.gif">
      </image>
      <image
            commandId="com.aptana.git.ui.command.commit"
            icon="icons/elcl16/disk.png">
      </image>
      <image
            commandId="com.aptana.git.ui.command.github.network"
            icon="icons/obj16/github.gif">
      </image>
      <image
            commandId="com.aptana.git.ui.command.pull"
            icon="icons/elcl16/arrow_down.png">
      </image>
      <image
            commandId="com.aptana.git.ui.command.push"
            icon="icons/elcl16/arrow_up.png">
      </image>
      <image
            commandId="com.aptana.git.ui.command.stash"
            icon="icons/elcl16/arrow_left.png">
      </image>
      <image
            commandId="com.aptana.git.ui.command.unstash"
            icon="icons/elcl16/arrow_right.png">
      </image>
      <image
            commandId="com.aptana.git.ui.command.create_tag"
            disabledIcon="icons/dlcl16/tag_blue_add.png"
            icon="icons/elcl16/tag_blue_add.png">
      </image>
      <image
            commandId="com.aptana.git.ui.command.disconnect"
            icon="icons/elcl16/disconnect.png">
      </image>
      <image
            commandId="com.aptana.git.ui.command.add_remote"
            icon="icons/elcl16/server_add.png">
      </image>
      <image
            commandId="com.aptana.git.ui.command.revert"
            icon="icons/elcl16/arrow_undo.png">
      </image>
      <image
            commandId="com.aptana.git.ui.command.cherry-pick"
            icon="icons/elcl16/cherry.gif">
      </image>
      <image
            commandId="com.aptana.git.ui.command.create_pull_request"
            icon="icons/obj16/pull_request.gif">
      </image>
   </extension>
   <extension
         point="org.eclipse.debug.ui.consoleLineTrackers">
      <consoleLineTracker
            class="com.aptana.git.ui.hyperlink.GitConsoleLineTracker"
            id="com.aptana.git.ui.consoleLineTracker"
            processType="git">
      </consoleLineTracker>
   </extension>
   <extension
         point="com.aptana.terminal.terminalHyperlinkDetectors">
      <detector
            class="com.aptana.git.ui.hyperlink.HyperlinkDetector">
      </detector>
   </extension>
   <extension
         point="org.eclipse.ui.contexts">
      <context
            id="com.aptana.git.ui.context.dialog.commit"
            name="%commit_dialog.context.name"
            parentId="org.eclipse.ui.contexts.dialog">
      </context>
   </extension>
   <extension
         point="org.eclipse.core.expressions.definitions">
      <definition
            id="com.aptana.git.ui.hasGitRepository">
         <or>
            <with
                  variable="activeMenuSelection">
               <iterate
                     ifEmpty="false">
                  <adapt
                        type="org.eclipse.core.resources.IResource">
                     <test
                           args="org.eclipse.team.core.repository,com.aptana.git.core.GitRepositoryProvider"
                           property="org.eclipse.core.resources.projectPersistentProperty"
                           value="true">
                     </test>
                  </adapt>
               </iterate>
            </with>
            <with
                  variable="activeMenuEditorInput">
               <iterate
                     ifEmpty="false">
                  <adapt
                        type="org.eclipse.core.resources.IResource">
                     <test
                           args="org.eclipse.team.core.repository,com.aptana.git.core.GitRepositoryProvider"
                           property="org.eclipse.core.resources.projectPersistentProperty"
                           value="true">
                     </test>
                  </adapt>
               </iterate>
            </with>
            <with
                  variable="selection">
               <iterate
                     ifEmpty="false">
                  <adapt
                        type="org.eclipse.core.resources.IResource">
                     <test
                           args="org.eclipse.team.core.repository,com.aptana.git.core.GitRepositoryProvider"
                           property="org.eclipse.core.resources.projectPersistentProperty"
                           value="true">
                     </test>
                  </adapt>
               </iterate>
            </with>
         </or>
      </definition>
   </extension>
   <extension
         point="org.eclipse.ui.commands">
      <command
            categoryId="com.aptana.git.ui.category"
            id="com.aptana.git.ui.history.switch_branch"
            name="%switch.history.branch.name">
      </command>
      <command
            categoryId="com.aptana.git.ui.category"
            id="com.aptana.git.ui.command.cherry-pick"
            name="%command.cherry-pick.name">
      </command>
   </extension>
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            allPopups="false"
            locationURI="menu:com.aptana.git.ui.history.switch_branch.command.pulldown">
         <dynamic
               class="com.aptana.git.ui.internal.actions.SwitchHistoryBranchPulldownContributionItem"
               id="com.aptana.git.ui.history.branches_dynamic">
         </dynamic>
      </menuContribution>
      <menuContribution
            allPopups="false"
            locationURI="toolbar:org.eclipse.team.ui.GenericHistoryView">
         <command
               commandId="com.aptana.git.ui.history.switch_branch"
               icon="icons/elcl16/arrow_branch.png"
               id="com.aptana.git.ui.history.switch_branch.command.pulldown"
               label="%switch.history.branch.label"
               style="pulldown">
         </command>
         <command
               commandId="com.aptana.git.ui.command.cherry-pick"
               style="push">
         </command>
      </menuContribution>
      <menuContribution
            allPopups="false"
            locationURI="popup:com.aptana.git.ui.git_history">
         <command
               commandId="com.aptana.git.ui.command.cherry-pick"
               style="push">
         </command>
         <menu
               commandId="com.aptana.git.ui.history.switch_branch"
               icon="icons/elcl16/arrow_branch.png"
               id="com.aptana.git.ui.actions.SwitchHistoryBranchAction"
               label="%switch.history.branch.label">
            <dynamic
                  class="com.aptana.git.ui.internal.actions.SwitchHistoryBranchPulldownContributionItem"
                  id="com.aptana.git.ui.history.branches_dynamic">
            </dynamic>
         </menu>
      </menuContribution>
   </extension>
   <extension
         point="org.eclipse.ui.handlers">
      <handler
            class="com.aptana.git.ui.internal.actions.CherryPickHandler"
            commandId="com.aptana.git.ui.command.cherry-pick">
         <enabledWhen>
	         <and>
	         	<with variable="activePart">
	         		<instanceof
	                      value="org.eclipse.team.ui.history.IHistoryView">
	                </instanceof>
	         	</with>
	      <!--   	 <with variable="selection">
	             	<count value="1">
	             	</count>
	            	<iterate
	                   ifEmpty="false"
	                   operator="and">
	                	<instanceof
	                      value="com.aptana.git.core.model.GitCommit">
	                	</instanceof>
	             	</iterate> 
	            </with>-->
          	</and>
        </enabledWhen>
      </handler>
      <handler
            class="com.aptana.git.ui.internal.actions.NoOpHandler"
            commandId="com.aptana.git.ui.history.switch_branch">
         <enabledWhen>
	         <and>
	         	<with variable="activePart">
	         		<instanceof
	                      value="org.eclipse.team.ui.history.IHistoryView">
	                </instanceof>
	         	</with>
	        	  <!--   	FIXME This doesn't work properly, on first opening the view it doesn't show as enabled. But if I focus back on editor and then back, it gets enabled.
	        	   <with variable="selection">
	             	<count value="1">
	             	</count>
	            	<iterate
	                   ifEmpty="false"
	                   operator="and">
	                	<instanceof
	                      value="com.aptana.git.core.model.GitCommit">
	                	</instanceof>
	             	</iterate> 
	            </with>-->
          	</and>
        </enabledWhen>
      </handler>
   </extension>
   <extension
         point="com.aptana.ui.accountsPreferencePage">
      <provider
            class="com.aptana.git.ui.internal.preferences.GithubAccountPageProvider"
            priority="50">
      </provider>
   </extension>
</plugin>
